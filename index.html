<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <base target="_self">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRANS AREIA - Gest√£o Profissional</title>
    <link rel="manifest" href="manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script>
        tailwind.config = {
            theme: { extend: { colors: { primary: "#c2410c", secondary: "#9a3412", sand: "#fffaf0" } } }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fffaf0; font-size: 18px; }
        .tab-content { display: none; animation: fadeIn 0.3s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .nav-btn.active { background-color: white; color: #c2410c; border-bottom: 6px solid #c2410c; }
        .status-pago { border-left: 14px solid #22c55e !important; }
        .status-pendente { border-left: 14px solid #ef4444 !important; }
        
        @media print { 
            .no-print { display: none !important; } 
            .print-only { display: block !important; } 
            #modal-nota { position: absolute !important; inset: 0 !important; background: white !important; padding: 0 !important; display: block !important; }
            body { background: white; }
        }
        .print-only { display: none; }
        #modal-nota { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 1000; align-items: center; justify-content: center; padding: 15px; backdrop-filter: blur(5px); }
    </style>
</head>
<body class="pb-24 text-black uppercase font-bold">

    <div id="loading" class="hidden fixed inset-0 bg-black/50 z-[1100] flex items-center justify-center text-white font-bold text-2xl uppercase">Processando...</div>

    <header class="bg-primary text-white p-6 shadow-lg flex justify-between items-center no-print">
        <div class="flex items-center gap-4">
            <i class="fas fa-truck-loading text-4xl text-yellow-400"></i> 
            <h1 class="text-3xl font-black italic tracking-tighter">TRANS AREIA</h1>
        </div>
        <button onclick="carregarDados()" class="bg-orange-800 p-4 rounded-lg text-2xl shadow-inner text-white"><i class="fas fa-sync-alt"></i></button>
    </header>

    <nav class="bg-orange-900 text-white flex sticky top-0 z-50 no-print overflow-x-auto shadow-md">
        <button onclick="switchTab('sales')" id="btn-sales" class="nav-btn active flex-1 py-6 font-black text-sm uppercase tracking-wider">Vendas</button>
        <button onclick="switchTab('dashboard')" id="btn-dashboard" class="nav-btn flex-1 py-6 font-black text-sm uppercase tracking-wider">Balan√ßo</button>
        <button onclick="switchTab('clients')" id="btn-clients" class="nav-btn flex-1 py-6 font-black text-sm uppercase tracking-wider">Hist√≥rico</button>
        <button onclick="switchTab('products')" id="btn-products" class="nav-btn flex-1 py-6 font-black text-sm uppercase tracking-wider">Materiais</button>
    </nav>

    <main class="container mx-auto p-4 md:p-6 no-print text-black">
        <div id="status-msg" class="text-center p-3 mb-4 text-sm font-bold uppercase rounded bg-orange-100 text-orange-800 italic border-2 border-orange-200">Sincronizando...</div>

        <section id="sales" class="tab-content active space-y-6">
            <div class="bg-white p-6 rounded-2xl shadow-md border-l-8 border-primary space-y-4 text-black">
                <input type="text" id="v-cliente" placeholder="NOME DO CLIENTE" class="w-full p-4 border-2 rounded-xl bg-orange-50 font-black outline-none text-xl text-black">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="text" id="v-cpf" placeholder="CPF/CNPJ" class="p-4 border-2 rounded-xl text-lg font-bold text-black">
                    <input type="tel" id="v-tel" placeholder="WhatsApp (DDD)" class="p-4 border-2 rounded-xl text-lg font-bold text-black">
                </div>
                <input type="text" id="v-end" placeholder="ENDERE√áO (OPCIONAL)" class="w-full p-4 border-2 rounded-xl outline-none font-bold text-lg text-black">
                <input type="date" id="v-data" class="w-full p-4 border-2 rounded-xl outline-none font-black text-xl text-black">
            </div>

            <div id="grid-materiais" class="grid grid-cols-2 md:grid-cols-4 gap-4 text-black"></div>

            <div class="bg-white rounded-2xl shadow-md overflow-hidden border-2 text-black">
                <table class="w-full text-left text-lg text-black">
                    <thead class="bg-orange-50 text-gray-600 font-black uppercase text-sm">
                        <tr><th class="p-4">Item</th><th class="p-4 text-center">Quantidade</th><th class="p-4 text-right">Tirar</th></tr>
                    </thead>
                    <tbody id="lista-pedido" class="divide-y font-bold text-black"></tbody>
                </table>
            </div>

            <div class="bg-white p-8 rounded-3xl shadow-xl border-t-8 border-orange-700 space-y-6">
                <div class="flex justify-between text-3xl font-black text-orange-900 tracking-tighter"><span>Total Geral:</span><span id="res-venda">R$ 0,00</span></div>
                <div class="grid grid-cols-1 gap-4">
                    <select id="v-pgto" class="p-5 border-2 rounded-2xl font-black bg-orange-50 uppercase text-lg outline-none text-black">
                        <option>DINHEIRO</option><option>PIX</option><option>CART√ÉO</option><option value="FIADO">üì¶ FIADO / PENDENTE</option>
                    </select>
                    <button onclick="registrarVenda()" class="bg-primary text-white font-black rounded-2xl p-6 uppercase text-xl shadow-2xl active:scale-95 transition-all">CONCLUIR VENDA</button>
                </div>
            </div>
        </section>

        <section id="dashboard" class="tab-content space-y-6">
            <div class="bg-white p-6 rounded-2xl shadow space-y-4">
                <select id="filtro-material" onchange="renderDash()" class="w-full p-5 border-2 rounded-xl font-black text-lg uppercase bg-gray-50 outline-none text-black">
                    <option value="all">TODOS OS MATERIAIS</option>
                </select>
                <div class="flex flex-wrap gap-2 text-black">
                    <button onclick="setFiltro(0)" id="filt-0" class="filt-btn flex-1 bg-orange-700 text-white py-4 rounded-xl text-sm font-black shadow uppercase">Hoje</button>
                    <button onclick="setFiltro(7)" id="filt-7" class="filt-btn flex-1 bg-orange-200 text-orange-900 py-4 rounded-xl text-sm font-black uppercase">7d</button>
                    <button onclick="setFiltro(30)" id="filt-30" class="filt-btn flex-1 bg-orange-200 text-orange-900 py-4 rounded-xl text-sm font-black uppercase">30d</button>
                    <button onclick="setFiltro(60)" id="filt-60" class="filt-btn flex-1 bg-orange-200 text-orange-900 py-4 rounded-xl text-sm font-black uppercase">60d</button>
                    <button onclick="setFiltro(90)" id="filt-90" class="filt-btn flex-1 bg-orange-200 text-orange-900 py-4 rounded-xl text-sm font-black uppercase">90d</button>
                    <button onclick="setFiltro('all')" id="filt-all" class="filt-btn flex-1 bg-orange-200 text-orange-900 py-4 rounded-xl text-sm font-black uppercase">Tudo</button>
                </div>
            </div>
            <div id="dash-resumo" class="grid grid-cols-1 md:grid-cols-2 gap-6 text-center text-black font-black uppercase"></div>
            <div id="secao-relatorio-fixo" class="bg-white p-6 rounded-2xl shadow border-t-4 border-black text-black font-black">
                <h2 class="text-center text-xl font-black uppercase mb-4 text-black font-black">Relat√≥rio de Gest√£o</h2>
                <div id="relatorio-resumo-mini" class="grid grid-cols-2 gap-2 mb-4 p-5 bg-gray-50 rounded-xl text-sm font-black uppercase border-2 text-black font-black"></div>
                <div class="overflow-x-auto text-black">
                    <table class="w-full border-collapse text-black">
                        <thead><tr class="bg-gray-200 uppercase text-sm border-b-2 border-black text-black font-black">
                            <th class="p-3 border-r text-left">Data</th><th class="p-3 border-r text-left">Cliente</th><th class="p-3 border-r text-left text-black font-black">Materiais</th><th class="p-3 text-right">Valor</th>
                        </tr></thead>
                        <tbody id="dash-saidas" class="text-sm font-black text-black"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="clients" class="tab-content space-y-4">
            <input type="text" id="busca-venda" oninput="filtrarVendas()" placeholder="BUSCAR CLIENTE..." class="w-full p-6 border-2 rounded-2xl outline-none uppercase font-black text-lg shadow-md text-black">
            <div id="lista-vendas-container" class="space-y-6 text-black"></div>
        </section>

        <section id="products" class="tab-content space-y-6">
            <div class="bg-white p-6 rounded-2xl shadow border-l-8 border-blue-500 space-y-4 text-black">
                <input type="text" id="p-nome" placeholder="NOME DO MATERIAL" class="w-full p-5 border-2 rounded-xl outline-none font-black text-xl text-black">
                <div class="grid grid-cols-2 gap-4">
                    <input type="number" id="p-custo" placeholder="CUSTO R$" class="p-5 border-2 rounded-xl text-lg font-bold text-black">
                    <input type="number" id="p-venda" placeholder="VENDA R$" class="p-5 border-2 rounded-xl text-lg font-black text-orange-700">
                </div>
                <button id="btn-salvar-prod" onclick="adicionarProduto()" class="w-full bg-blue-600 text-white font-black p-6 rounded-2xl uppercase text-xl shadow-lg">SALVAR NOVO MATERIAL</button>
            </div>
            <div id="lista-produtos-cards" class="grid grid-cols-1 gap-4 text-black"></div>
        </section>
    </main>

    <div id="modal-nota" class="no-print" onclick="if(event.target == this) fecharNota()">
        <div class="bg-white rounded-[2rem] w-full max-w-md overflow-hidden shadow-2xl border-t-[12px] border-primary text-black">
            <div id="area-recibo-cliente" class="p-8 bg-white text-black font-black uppercase" style="font-family: monospace; font-size: 14px;">
                <div class="text-center mb-6"><h2 class="text-3xl font-black italic">TRANS AREIA</h2><p class="text-[11px]">Juazeiro - BA</p></div>
                <div class="flex justify-between border-y-2 border-black py-2 mb-6 font-black text-sm">
                    <span>Recibo</span> <span id="p-data">--/--/----</span>
                </div>
                <div class="mb-6 leading-tight space-y-1">
                    <p><b>CLIENTE:</b> <span id="p-cliente"></span></p>
                    <p id="p-cpf-box"><b>CPF/CNPJ:</b> <span id="p-cpf-nota"></span></p>
                    <p id="box-endereco-recibo"><b>ENDERE√áO:</b> <span id="p-endereco"></span></p>
                </div>
                <table class="w-full mb-6 border-b-2 border-black">
                    <tbody id="p-itens"></tbody>
                </table>
                <div class="text-right font-black text-2xl mb-8">TOTAL: <span id="p-total-venda">R$ 0,00</span></div>
                <div class="border-2 border-black p-4 text-center font-black text-sm rounded-xl bg-gray-50">
                    PAGO VIA: <span id="p-pgto"></span><br>STATUS: <span id="p-status"></span>
                </div>
                <div class="text-center mt-12">
                    <div class="border-t-2 border-black w-48 mx-auto"></div>
                    <p class="text-xs font-black mt-2 uppercase">Assinatura do Respons√°vel</p>
                </div>
            </div>
            <div class="p-6 grid grid-cols-3 gap-3 bg-gray-100 border-t-2">
                <button onclick="window.print()" class="bg-slate-800 text-white p-4 rounded-2xl text-xs font-black uppercase">PDF</button>
                <button onclick="enviarZap()" class="bg-green-600 text-white p-4 rounded-2xl text-xs font-black uppercase">ZAP</button>
                <button onclick="fecharNota()" class="bg-white text-red-600 p-4 rounded-2xl text-xs font-black border-2 border-red-200">SAIR</button>
            </div>
        </div>
    </div>

    <div id="cliente-print-only" class="print-only p-10 bg-white"></div>

    <script>
        const API = "https://script.google.com/macros/s/AKfycbygNBsZNqly4O19ef9CBTbiutemf9bN7jeCvNZoRnpOlUMF0tHYp8dav8IjocCRQVa5Tg/exec";
        let DB = { materiais: [], vendas: [] };
        let pedido = [];
        let filtroDias = 0;
        let vAtiva = null;
        let salvandoProd = false;

        async function carregarDados() {
            document.getElementById('loading').classList.remove('hidden');
            try {
                const res = await fetch(API + "?t=" + Date.now());
                DB = await res.json();
                document.getElementById('status-msg').innerText = "‚úÖ CONECTADO";
                const select = document.getElementById('filtro-material');
                select.innerHTML = '<option value="all">TODOS OS MATERIAIS</option>';
                DB.materiais.forEach(m => select.innerHTML += `<option value="${m.nome}">${m.nome}</option>`);
                renderVendas(); renderProdutos(); renderDash();
                document.getElementById('grid-materiais').innerHTML = DB.materiais.map(m => `
                    <button onclick="add('${m.nome}',${m.custo},${m.venda})" class="p-4 border-2 rounded-2xl bg-white shadow-md active:scale-95 text-sm font-black uppercase text-slate-700">
                        ${m.nome}<br><span class="text-orange-700 text-sm font-black text-black font-black">R$ ${Number(m.venda).toFixed(2)}</span>
                    </button>`).join('');
            } catch (e) { document.getElementById('status-msg').innerText = "‚ùå ERRO"; }
            document.getElementById('loading').classList.add('hidden');
        }

        function add(n, c, v) { const i = pedido.find(p => p.nome === n); if(i) i.qtd += 1; else pedido.push({nome: n, custo: c, venda: v, qtd: 1, unid: 'm¬≥'}); renderPedido(); }
        function removeSacola(index) { pedido.splice(index, 1); renderPedido(); }
        
        function renderPedido() {
            document.getElementById('lista-pedido').innerHTML = pedido.map((p, i) => `
                <tr class="border-b">
                    <td class="p-4 uppercase font-black text-xs text-slate-600">${p.nome}</td>
                    <td class="p-4 text-center flex items-center justify-center gap-2">
                        <input type="number" step="0.1" value="${p.qtd}" class="w-16 border-2 rounded-lg text-center font-black p-2 text-lg text-black" onchange="pedido[${i}].qtd=parseFloat(this.value);renderPedido()">
                        <select class="text-xs border-2 rounded-lg p-2 font-black text-black" onchange="pedido[${i}].unid=this.value;renderPedido()">
                            <option value="m¬≥" ${p.unid === 'm¬≥' ? 'selected' : ''}>m¬≥</option>
                            <option value="Ton" ${p.unid === 'Ton' ? 'selected' : ''}>Ton</option>
                            <option value="Vgm" ${p.unid === 'Vgm' ? 'selected' : ''}>Vgm</option>
                        </select>
                    </td>
                    <td class="p-4 text-right">
                        <button onclick="removeSacola(${i})" class="text-red-500 text-3xl"><i class="fas fa-trash-alt"></i></button>
                    </td>
                </tr>`).join('');
            document.getElementById('res-venda').innerText = "R$ " + pedido.reduce((a,b) => a + (b.venda * b.qtd), 0).toFixed(2);
        }

        async function registrarVenda() {
            const cli = document.getElementById('v-cliente').value;
            if(!cli || pedido.length === 0) return alert("Erro: Preencha cliente e materiais!");
            document.getElementById('loading').classList.remove('hidden');
            const venda = { data: document.getElementById('v-data').value, cliente: cli.toUpperCase(), whatsapp: document.getElementById('v-tel').value, cpf: document.getElementById('v-cpf').value, endereco: document.getElementById('v-end').value || "N√ÉO INFORMADO", materiais: pedido.map(p => `${p.qtd}${p.unid} ${p.nome}`).join(", "), total_custo: pedido.reduce((a,b) => a + (b.custo * b.qtd), 0).toFixed(2), total_venda: pedido.reduce((a,b) => a + (b.venda * b.qtd), 0).toFixed(2), pagamento: document.getElementById('v-pgto').value, status: document.getElementById('v-pgto').value === 'FIADO' ? 'Pendente' : 'Pago' };
            await fetch(API, { method: 'POST', body: JSON.stringify({acao: 'salvar_venda', dados: venda}) });
            location.reload();
        }

        function abrirNota(id) {
            const v = DB.vendas.find(x => x[0] == id);
            if(!v) return;
            vAtiva = v;
            document.getElementById('p-cliente').innerText = v[3];
            document.getElementById('p-data').innerText = v[1];
            document.getElementById('p-total-venda').innerText = "R$ " + v[8];
            document.getElementById('p-pgto').innerText = v[9];
            document.getElementById('p-status').innerText = v[10].toUpperCase();
            const cpf = v[5] || "";
            document.getElementById('p-cpf-nota').innerText = cpf;
            document.getElementById('p-cpf-box').style.display = (!cpf || cpf === "---") ? "none" : "block";
            const end = v[11] || "N√ÉO INFORMADO";
            document.getElementById('p-endereco').innerText = end;
            document.getElementById('box-endereco-recibo').style.display = (end === "N√ÉO INFORMADO") ? "none" : "block";
            document.getElementById('p-itens').innerHTML = v[6].split(', ').map(item => `<tr><td class="font-black text-black">${item}</td></tr>`).join('');
            document.getElementById('cliente-print-only').innerHTML = document.getElementById('area-recibo-cliente').innerHTML;
            document.getElementById('modal-nota').style.display = "flex";
        }

        function fecharNota() { document.getElementById('modal-nota').style.display = "none"; }
        
        function enviarZap() {
            if(!vAtiva) return alert("Selecione uma venda!");
            const txt = `*TRANS AREIA - RECIBO DE VENDA*%0A%0A*DATA:* ${vAtiva[1]}%0A*CLIENTE:* ${vAtiva[3]}%0A${vAtiva[5] ? '*CPF/CNPJ:* ' + vAtiva[5] + '%0A' : ''}*ITENS:* ${vAtiva[6]}%0A*TOTAL:* R$ ${vAtiva[8]}%0A*PAGAMENTO:* ${vAtiva[9]}%0A*STATUS:* ${vAtiva[10].toUpperCase()}%0A%0AAgradecemos a prefer√™ncia!`;
            window.open(`https://api.whatsapp.com/send?phone=55${vAtiva[4].replace(/\D/g,'')}&text=${txt}`);
        }

        function renderDash() {
            const filtradas = getFiltradas();
            const mat = document.getElementById('filtro-material').value;
            const vendaT = filtradas.reduce((a,v) => a + Number(v[8]), 0);
            const custoT = filtradas.reduce((a,v) => a + Number(v[7]), 0);
            document.getElementById('dash-resumo').innerHTML = `<div class="bg-white p-5 rounded-2xl shadow-md border-l-8 border-green-500 font-black text-black font-black uppercase">Vendas: R$ ${vendaT.toFixed(2)}</div><div class="bg-primary p-5 rounded-2xl shadow-xl text-white font-black font-black uppercase">Lucro: R$ ${(vendaT - custoT).toFixed(2)}</div>`;
            document.getElementById('relatorio-resumo-mini').innerText = `Filtro: ${mat === 'all' ? 'TODOS' : mat} | Total: R$ ${vendaT.toFixed(2)}`;
            document.getElementById('dash-saidas').innerHTML = filtradas.map(v => `<tr class="border-b uppercase font-black font-bold text-black font-black"><td class="p-3 border-r text-slate-500">${v[1]}</td><td class="p-3 border-r text-slate-800">${v[3]}</td><td class="p-3 border-r text-orange-700 text-[10px]">${v[6]}</td><td class="p-3 text-right">R$ ${v[8]}</td></tr>`).join('') || '<tr><td colspan="4" class="text-center py-6 italic text-black font-bold">Sem registros.</td></tr>';
        }

        function getFiltradas() {
            const matFiltro = document.getElementById('filtro-material').value;
            const hoje = new Date(); hoje.setHours(0,0,0,0);
            return DB.vendas.filter(v => {
                const materialOk = matFiltro === 'all' || v[6].includes(matFiltro);
                if(filtroDias === 'all') return materialOk;
                const partes = v[1].split('/');
                const dataV = new Date(partes[2], partes[1]-1, partes[0]);
                dataV.setHours(0,0,0,0);
                const diff = Math.floor((hoje - dataV) / (1000 * 60 * 60 * 24));
                return materialOk && (diff >= 0 && (filtroDias === 'all' ? true : diff <= filtroDias));
            });
        }

        function renderVendas(filtro = "") {
            const ordenadas = [...DB.vendas].reverse();
            document.getElementById('lista-vendas-container').innerHTML = ordenadas.filter(v => v[3].toLowerCase().includes(filtro.toLowerCase())).map(v => `<div class="bg-white p-5 rounded-2xl shadow-md border-l-[14px] ${v[10] === 'Pago' ? 'border-green-500' : 'border-red-500'} text-black"><div class="flex justify-between items-start text-xs uppercase font-black"><div><span class="text-lg">${v[3]}</span><p class="text-[9px] font-bold text-gray-400 font-black text-black">${v[1]} | ${v[9]}</p></div><button onclick="excluirVenda('${v[0]}')" class="text-red-300 text-2xl font-black"><i class="fas fa-trash-alt"></i></button></div><div class="mt-4 flex gap-3 text-black">${v[10] === 'Pendente' ? `<button onclick="darBaixa('${v[0]}')" class="bg-green-600 text-white flex-1 py-3 rounded-xl font-black text-sm">RECEBER</button>` : ''}<button onclick="abrirNota('${v[0]}')" class="bg-gray-100 flex-1 py-3 rounded-xl font-black text-sm border-2 uppercase font-black text-black">Ver Nota</button></div></div>`).join('');
        }

        async function darBaixa(id) { if(confirm("Mudar para PAGO?")) { document.getElementById('loading').classList.remove('hidden'); await fetch(API, { method: 'POST', body: JSON.stringify({acao: 'baixa_fiado', id: id}) }); carregarDados(); } }
        async function excluirVenda(id) { if(confirm("Apagar venda?")) { document.getElementById('loading').classList.remove('hidden'); await fetch(API, { method: 'POST', body: JSON.stringify({acao: 'excluir_venda', id: id}) }); carregarDados(); } }
        function renderProdutos() { document.getElementById('lista-produtos-cards').innerHTML = DB.materiais.map(m => `<div class="bg-white p-5 rounded-2xl shadow-md border-2 flex justify-between items-center font-black uppercase text-black font-black"><div><p class="text-sm font-black text-orange-900 font-black">${m.nome}</p><p class="text-xs text-gray-400 font-black">Venda: R$ ${Number(m.venda).toFixed(2)}</p></div><button onclick="excluirProd('${m.nome}')" class="text-red-400 text-3xl font-black"><i class="fas fa-trash-alt text-black"></i></button></div>`).join(''); }
        
        async function adicionarProduto() {
            if(salvandoProd) return;
            const n = document.getElementById('p-nome').value;
            const c = document.getElementById('p-custo').value;
            const v = document.getElementById('p-venda').value;
            if(!n || !c || !v) return alert("Preencha tudo!");
            salvandoProd = true; document.getElementById('loading').classList.remove('hidden');
            await fetch(API, { method: 'POST', body: JSON.stringify({acao: 'salvar_material', dados: {nome: n.toUpperCase(), custo: c, venda: v}}) });
            location.reload();
        }

        async function excluirProd(n) { if(confirm(`Apagar ${n}?`)) { document.getElementById('loading').classList.remove('hidden'); await fetch(API, { method: 'POST', body: JSON.stringify({acao: 'excluir_material', nome: n}) }); carregarDados(); } }
        function setFiltro(d) { filtroDias = d; document.querySelectorAll('.filt-btn').forEach(b => b.classList.replace('bg-orange-700', 'bg-orange-200')); if(d!=='all') document.getElementById('filt-'+d).classList.replace('bg-orange-200', 'bg-orange-700'); else document.getElementById('filt-all').classList.replace('bg-orange-200', 'bg-orange-700'); renderDash(); }
        function switchTab(id) { document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active')); document.getElementById(id).classList.add('active'); document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active')); document.getElementById('btn-' + id).classList.add('active'); }
        function filtrarVendas() { renderVendas(document.getElementById('busca-venda').value); }
        document.getElementById('v-data').value = new Date().toISOString().split('T')[0];
        carregarDados();
    </script>
</body>
</html>